import{p as B,ac as E,q as F,ar as h,r as m,a as M}from"./index-Z8DUt18u.js";function x(e){const{loading:p,startLoading:k,endLoading:f}=B(),{bool:v,setBool:C}=E(),{apiFn:P,apiParams:l,transformer:b,immediate:y=!0,getColumnChecks:d,getColumns:g}=e,o=F(h({...l})),r=m(e.columns()),i=m([]),c=m(d(e.columns())),j=M(()=>g(r.value,c.value));function w(){r.value=e.columns();const t=new Map(c.value.map(a=>[a.key,a.checked])),s=d(r.value);c.value=s.map(a=>({...a,checked:t.get(a.key)??a.checked}))}async function u(){var n;k();const t=L(o),s=await P(t),a=b(s);i.value=a.data,C(a.data.length===0),await((n=e.onFetched)==null?void 0:n.call(e,a)),f()}function L(t){const s={};return Object.entries(t).forEach(([a,n])=>{n!=null&&(s[a]=n)}),s}function O(t){Object.assign(o,t)}function S(){Object.assign(o,h(l)),u()}return y&&u(),{loading:p,empty:v,data:i,columns:j,columnChecks:c,reloadColumns:w,getData:u,searchParams:o,updateSearchParams:O,resetSearchParams:S}}export{x as u};
