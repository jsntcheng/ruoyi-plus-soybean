import{cJ as $,bA as y,E as f}from"./index-Z8DUt18u.js";const _={Y:"common.yesOrNo.yes",N:"common.yesOrNo.no"};$(_);const l={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"},L={DEV:!1,VITE_APP_BASE_API:"/prod-api",VITE_APP_WEBSOCKET:"N",VITE_HTTP_PROXY:"Y"};function T(){const{baseURL:w}=y(L,!1);function g(i,n,d="application/octet-stream"){const s=[i],c=new Blob(s,{type:d}),a=window.URL.createObjectURL(c),e=document.createElement("a");e.style.display="none",e.href=a,e.setAttribute("download",n),typeof e.download>"u"&&e.setAttribute("target","_blank"),document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(a)}function p(i,n,d){var o;(o=window.$loading)==null||o.startLoading("正在下载数据，请稍候...");const s=f.get("token"),c="e5cd7e4891bf95d1d19206ce24a7b32e",a=Date.now(),e=new FormData;n&&Object.keys(n).forEach(t=>{n[t]!==null&&n[t]!==void 0&&e.append(t,n[t])}),fetch(`${w}${i}?t=${a}`,{method:"post",body:e,headers:{Authorization:`Bearer ${s}`,Clientid:c,"Content-Type":"application/octet-stream"}}).then(async t=>{var r;if((r=t.headers.get("Content-Type"))!=null&&r.includes("application/json")){const h=await t.json(),u=h.code;throw new Error(l[u]||h.msg||l.default)}return t.blob()}).then(t=>g(t,d,"application/zip")).catch(t=>{var r;return(r=window.$message)==null?void 0:r.error(t.message)}).finally(()=>{var t;return(t=window.$loading)==null?void 0:t.endLoading()})}function b(i){var e;(e=window.$loading)==null||e.startLoading("正在下载数据，请稍候...");const n=f.get("token"),d="e5cd7e4891bf95d1d19206ce24a7b32e",s=`/resource/oss/download/${i}`,c=Date.now();let a=`${i}-${c}`;fetch(`${w}${s}?t=${c}`,{method:"get",headers:{Authorization:`Bearer ${n}`,Clientid:d,"Content-Type":"application/octet-stream"}}).then(async o=>(a=String(o.headers.get("Download-Filename")),o.blob())).then(o=>g(o,a)).catch(o=>{var t;return(t=window.$message)==null?void 0:t.error(o.message)}).finally(()=>{var o;return(o=window.$loading)==null?void 0:o.endLoading()})}function m(i,n){var a;(a=window.$loading)==null||a.startLoading("正在下载数据，请稍候...");const d=f.get("token"),s="e5cd7e4891bf95d1d19206ce24a7b32e",c=Date.now();fetch(`${w}${i}${i.includes("?")?"&":"?"}t=${c}`,{method:"get",headers:{Authorization:`Bearer ${d}`,Clientid:s,"Content-Type":"application/octet-stream"}}).then(async e=>{var o;if((o=e.headers.get("Content-Type"))!=null&&o.includes("application/json")){const t=await e.json(),r=t.code;throw new Error(l[r]||t.msg||l.default)}return e.blob()}).then(e=>g(e,n,"application/zip")).catch(e=>{var o;return(o=window.$message)==null?void 0:o.error(e.message)}).finally(()=>{var e;return(e=window.$loading)==null?void 0:e.endLoading()})}return{oss:b,zip:m,download:p}}export{T as u};
