import{cm as m,r as s,cn as g,am as h,co as S}from"./index-Z8DUt18u.js";import{e as p}from"./dict-CTAJ1fRb.js";const w=m("dict",()=>{const e=s({});return{dictData:e,getDict:i=>e.value[i],setDict:(i,r)=>{e.value[i]=r},removeDict:i=>{i in e.value&&delete e.value[i]},cleanDict:()=>{e.value={}}}});function L(e,v=!0){const n=w(),{dictData:D}=g(n),a=s([]),i=s({}),r=s([]);async function o(){const t=n.getDict(e);if(t){a.value=t;return}const{data:c,error:f}=await p(e);f||(n.setDict(e,c),a.value=c)}async function u(){a.value.length||await o(),a.value.forEach(t=>{i.value[t.dictValue]=t.dictLabel})}async function l(){a.value.length||await o(),r.value=a.value.map(t=>({label:t.dictLabel,value:t.dictValue}))}function d(t){if(!(!a.value.length||S(t)))return Array.isArray(t)?a.value.filter(c=>t.some(f=>c.dictValue===f.toString())):a.value.filter(c=>c.dictValue===t.toString())}return v?o().then(()=>{u(),l()}):h(()=>D.value[e],t=>{t&&t.length&&(u(),l())},{immediate:!0}),{data:a,record:i,options:r,getData:o,getRecord:u,getOptions:l,transformDictData:d}}export{L as u};
