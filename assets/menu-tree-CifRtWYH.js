import{d as q,ak as R,ac as M,r as _,al as k,as as V,i as E,am as G,b as w,o as C,s as H,f as s,z as L,h as g,af as K,w as h,g as x,x as P,aa as z,_ as D,G as W}from"./index-Z8DUt18u.js";import{h as $}from"./menu-Xcd0YzZ-.js";import{_ as j}from"./Tree-C1TOTihx.js";const F={class:"w-full flex-col gap-12px"},J={key:0,class:"w-full flex-center"},O=q({name:"MenuTree",__name:"menu-tree",props:R({immediate:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0}},{checkedKeys:{required:!1,default:[]},checkedKeysModifiers:{},options:{required:!1,default:[]},optionsModifiers:{},cascade:{type:Boolean,required:!1,default:!0},cascadeModifiers:{},loading:{type:Boolean,required:!1,default:!1},loadingModifiers:{}}),emits:["update:checkedKeys","update:options","update:cascade","update:loading"],setup(o,{expose:N}){const T=o,{bool:d}=M(),{bool:m}=M(),u=_([0]),v=_(null),r=k(o,"checkedKeys"),c=k(o,"options"),i=k(o,"cascade"),f=k(o,"loading"),B=V();async function b(){f.value=!0;const{error:a,data:e}=await $();a||(c.value=[{id:0,label:"根目录",icon:"material-symbols:home-outline-rounded",children:e}],f.value=!1)}E(()=>{T.immediate&&b()}),G([d,c],([a])=>{a?u.value=y(c.value):u.value=[0]});function I({option:a}){const e=String(a.icon).startsWith("local-icon-");let l=e?void 0:String(a.icon??"material-symbols:buttons-alt-outline-rounded");const t=e?String(a.icon).replace("local-icon-","menu-"):void 0;return l==="#"&&(l="material-symbols:buttons-alt-outline-rounded"),s(D,{icon:l,localIcon:t},null)}function y(a){const e=[];return a.forEach(l=>{e.push(l.id),l.children&&e.push(...y(l.children))}),e}function S(a){if(a){r.value=y(c.value);return}r.value=[]}function A(){var l,t,p;const a=(t=(l=v.value)==null?void 0:l.getCheckedData())==null?void 0:t.keys,e=(p=v.value)==null?void 0:p.getIndeterminateData();if(i.value){const n=e==null?void 0:e.keys.filter(U=>!(a!=null&&a.includes(String(U))));a==null||a.push(...n)}return a}return N({getCheckedMenuIds:A,refresh:b}),(a,e)=>{const l=L,t=j,p=P;return C(),w("div",F,[a.showHeader?(C(),w("div",J,[s(l,{checked:g(d),"onUpdate:checked":e[0]||(e[0]=n=>K(d)?d.value=n:null),"checked-value":!0,"unchecked-value":!1},{default:h(()=>e[5]||(e[5]=[x("展开/折叠")])),_:1},8,["checked"]),s(l,{checked:g(m),"onUpdate:checked":[e[1]||(e[1]=n=>K(m)?m.value=n:null),S],"checked-value":!0,"unchecked-value":!1},{default:h(()=>e[6]||(e[6]=[x(" 全选/反选 ")])),_:1},8,["checked"]),s(l,{checked:i.value,"onUpdate:checked":e[2]||(e[2]=n=>i.value=n),"checked-value":!0,"unchecked-value":!1},{default:h(()=>e[7]||(e[7]=[x("父子联动")])),_:1},8,["checked"])])):H("",!0),s(p,{class:"resource h-full w-full py-6px pl-3px","content-class":"h-full",show:f.value},{default:h(()=>[s(t,z({ref_key:"menuTreeRef",ref:v,"checked-keys":r.value,"onUpdate:checkedKeys":e[3]||(e[3]=n=>r.value=n),"expanded-keys":u.value,"onUpdate:expandedKeys":e[4]||(e[4]=n=>u.value=n),multiple:"",checkable:"",selectable:!1,"key-field":"id","label-field":"label",data:c.value,cascade:i.value,loading:f.value,"virtual-scroll":"","check-strategy":"all","render-prefix":I},g(B)),null,16,["checked-keys","expanded-keys","data","cascade","loading"])]),_:1},8,["show"])])}}}),Z=W(O,[["__scopeId","data-v-7196ce72"]]);export{Z as M};
